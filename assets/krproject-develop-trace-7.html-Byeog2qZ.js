import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,d as a,o as t}from"./app-CdpNCDY8.js";const r={};function n(p,e){return t(),s("div",null,[...e[0]||(e[0]=[a(`<p>趁着这段还不是很忙的时间，考虑将krproject的web页面搞定，这样大家便会对krproject有个更直观的感受了，当然还希望能有一定的乐趣和可玩性，便有了结合weibo和krproject的想法，于是我的krproject的examples里除了antifraud，又多了个playweibo。</p><h2 id="playweibo" tabindex="-1"><a class="header-anchor" href="#playweibo"><span>PlayWeibo</span></a></h2><p>这个playweibo小应用例子的大致设计想法是：</p><p>用户登录krweb后，通过<a href="http://oauth.net/2/" title="oauth2" target="_blank" rel="noopener noreferrer">OAuth2</a>授权绑定后，后台定时获取各个社交媒体（目前只做了新浪微博，以后看情况考虑接入腾讯微博，twitter，google plus……，有krproject对多数据源的支持，添加一个应用来源还是很轻松的！）的timeline信息后，发送到krserver。krserver则根据用户在krweb上设定的规则，可以对接收的微博流水进行智能化操作，比如自动转发（接入其他社交媒体信息后，便可以设定类似这样的规则：将腾讯微博自动转发到新浪微博了）、自动评论、信息统计、消息提醒与备份等等。</p><h2 id="修改内容" tabindex="-1"><a class="header-anchor" href="#修改内容"><span>修改内容</span></a></h2><p>但是实际在用flask框架写krweb的时候，还是发现了要想支持这样的应用，krproject还需要做一些完善，于是便有了github上的这一次<a href="https://github.com/abstiger/krproject/commit/3e04f2ede77ba9bbdcf1178c6b5a155876b4af1e" title="github commit" target="_blank" rel="noopener noreferrer">commit</a>，主要修改内容有:</p><ol><li>线程池的lockfree改造，这是上次压力测试发现的问题了，本来想采用无锁队列，仔细分析了下后，觉得没必要搞的这么复杂。我的改造很简单也很粗暴，并没有用什么底层CAS原语或者高一点的spinlock，而就是在主线程里while……</li><li>群组的引入，群组是一系列规则的集合，有了它便可以实现规则的差异化管理了。</li><li>json的全面引入，无论是消息报文的输入、计算器的构造、规则处理的结果输出全面支持json格式了，借着json的易用性和高可扩展性，krengine的应变能力应该会有较大幅度的提升。</li></ol><p>其中最主要的莫过于我舍弃了之前写的基于flex&amp;bison的<a href="./krproject-develop-trace-2">计算器表达式</a>，改为了更适合web编辑的json格式：</p><p>之前的字符串格式计算器表达式:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>(F_6 @@ {&#39;00&#39;,&#39;01&#39;,&#39;02&#39;,} );</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>现在的json格式计算器表达式:</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-json"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;op&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:	</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">15</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;child0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:	{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;kind&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:	</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">7</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;value&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:	</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">6</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    },</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;child1&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:	{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;kind&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:	</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">14</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;value&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:	</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;00,01,02,&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>虽然没有之前的简单清晰，但是前台js处理起来应该会舒服很多。：）</p><h2 id="后续计划" tabindex="-1"><a class="header-anchor" href="#后续计划"><span>后续计划</span></a></h2><p>虽然这段时间还是coding了不少代码，krweb的框架也大致搭好，但是距离krweb的正式上线还是有一些距离的，后面主要的任务就是将krweb完成，并争取早日将playweibo弄上线!</p><p>ps:是放到我的小树莓派pi上哦~：）</p>`,16)])])}const h=i(r,[["render",n]]),k=JSON.parse(`{"path":"/projects/krproject/krproject-develop-trace-7.html","title":"krproject开发进展（七）","lang":"zh-CN","frontmatter":{"order":7,"title":"krproject开发进展（七）","article":false,"date":"2013-02-26T19:01:16.000Z","description":"趁着这段还不是很忙的时间，考虑将krproject的web页面搞定，这样大家便会对krproject有个更直观的感受了，当然还希望能有一定的乐趣和可玩性，便有了结合weibo和krproject的想法，于是我的krproject的examples里除了antifraud，又多了个playweibo。 PlayWeibo 这个playweibo小应用例子...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"WebPage\\",\\"name\\":\\"krproject开发进展（七）\\",\\"description\\":\\"趁着这段还不是很忙的时间，考虑将krproject的web页面搞定，这样大家便会对krproject有个更直观的感受了，当然还希望能有一定的乐趣和可玩性，便有了结合weibo和krproject的想法，于是我的krproject的examples里除了antifraud，又多了个playweibo。 PlayWeibo 这个playweibo小应用例子...\\"}"],["meta",{"property":"og:url","content":"https://abstiger.com/projects/krproject/krproject-develop-trace-7.html"}],["meta",{"property":"og:site_name","content":"Tiger's Website"}],["meta",{"property":"og:title","content":"krproject开发进展（七）"}],["meta",{"property":"og:description","content":"趁着这段还不是很忙的时间，考虑将krproject的web页面搞定，这样大家便会对krproject有个更直观的感受了，当然还希望能有一定的乐趣和可玩性，便有了结合weibo和krproject的想法，于是我的krproject的examples里除了antifraud，又多了个playweibo。 PlayWeibo 这个playweibo小应用例子..."}],["meta",{"property":"og:type","content":"website"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-11-15T10:21:25.000Z"}],["meta",{"property":"article:published_time","content":"2013-02-26T19:01:16.000Z"}],["meta",{"property":"article:modified_time","content":"2025-11-15T10:21:25.000Z"}]]},"git":{"createdTime":1763202085000,"updatedTime":1763202085000,"contributors":[{"name":"mingqiang.cheng","username":"","email":"mingqiang.cheng@cloudpense.com","commits":1}]},"readingTime":{"minutes":2.5,"words":750},"filePathRelative":"projects/krproject/krproject-develop-trace-7.md","excerpt":"<p>趁着这段还不是很忙的时间，考虑将krproject的web页面搞定，这样大家便会对krproject有个更直观的感受了，当然还希望能有一定的乐趣和可玩性，便有了结合weibo和krproject的想法，于是我的krproject的examples里除了antifraud，又多了个playweibo。</p>\\n<h2>PlayWeibo</h2>\\n<p>这个playweibo小应用例子的大致设计想法是：</p>\\n<p>用户登录krweb后，通过<a href=\\"http://oauth.net/2/\\" title=\\"oauth2\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">OAuth2</a>授权绑定后，后台定时获取各个社交媒体（目前只做了新浪微博，以后看情况考虑接入腾讯微博，twitter，google plus……，有krproject对多数据源的支持，添加一个应用来源还是很轻松的！）的timeline信息后，发送到krserver。krserver则根据用户在krweb上设定的规则，可以对接收的微博流水进行智能化操作，比如自动转发（接入其他社交媒体信息后，便可以设定类似这样的规则：将腾讯微博自动转发到新浪微博了）、自动评论、信息统计、消息提醒与备份等等。</p>","autoDesc":true}`);export{h as comp,k as data};
