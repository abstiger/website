import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as i,o as t}from"./app-CdpNCDY8.js";const n={};function o(r,e){return t(),a("div",null,[...e[0]||(e[0]=[i(`<h1 id="极客家居-连接控制" tabindex="-1"><a class="header-anchor" href="#极客家居-连接控制"><span>极客家居-连接控制</span></a></h1><p>基于 HAOS 的连接控制处理</p><h2 id="原理背景" tabindex="-1"><a class="header-anchor" href="#原理背景"><span>原理背景</span></a></h2><p>现有的智能家居解决方案几乎都是需要将家庭数据上传至云端，在云端编辑规则或者场景方案来实现自动化及智能控制。</p><p>但这带来了诸多的安全隐患，尽管各厂商均宣称其尊重隐私，但显然我们并不希望将家庭的私有数据放到云端！</p><h3 id="运算处理" tabindex="-1"><a class="header-anchor" href="#运算处理"><span>运算处理</span></a></h3><p>所谓智能家居的运作流程：收集各种智能设备的输入，在<strong>核心</strong>中进行场景匹配和规则运算，再调用智能设备的输出</p><h3 id="连接协议" tabindex="-1"><a class="header-anchor" href="#连接协议"><span>连接协议</span></a></h3><p>目前来说IOT的连接标准或者统一联盟为：https://csa-iot.org</p><p>下属有两个工作组WorkGroup：</p><ul><li><a href="https://csa-iot.org/all-solutions/zigbee/" target="_blank" rel="noopener noreferrer">Zigbee</a> 目前较为完善，厂商支持较好</li><li><a href="https://csa-iot.org/all-solutions/matter/" target="_blank" rel="noopener noreferrer">Matter</a> 基于IP的方案，是趋势</li></ul><p>总之，目前物联网的发展还是蓬勃的阶段，处于标准的设计和建立阶段，但不影响我们基于这些协议和连接做的上层应用上！</p><ul><li>mqtt https://mqtt.org/</li></ul><p>MQTT is an OASIS standard messaging protocol for the Internet of Things (IoT). It is designed as an extremely lightweight publish/subscribe messaging transport that is ideal for connecting remote devices with a small code footprint and minimal network bandwidth. MQTT today is used in a wide variety of industries, such as automotive, manufacturing, telecommunications, oil and gas, etc.</p><p>MQTT is the most commonly used messaging protocol for the Internet of Things (IoT). MQTT stands for MQ Telemetry Transport. The protocol is a set of rules that defines how IoT devices can publish and subscribe to data over the Internet. MQTT is used for messaging and data exchange between IoT and industrial IoT (IIoT) devices, such as embedded devices, sensors, industrial PLCs, etc. The protocol is event driven and connects devices using the publish /subscribe (Pub/Sub) pattern. The sender (Publisher) and the receiver (Subscriber) communicate via Topics and are decoupled from each other. The connection between them is handled by the MQTT broker. The MQTT broker filters all incoming messages and distributes them correctly to the Subscribers.</p><ul><li><p>CSA-IOT<br> https://csa-iot.org/<br> Building the Foundation and Future of the IoT The Connectivity Standards Alliance is the place where industry professionals across the globe come together, paving the way to a world of seamless interaction that is transforming the way we live, work, and play. We believe all objects can work together to enhance our day-to-day experiences, and together we create the standards, tools, and platforms which make this possible.</p></li><li><p>Zigbee<br> https://csa-iot.org/all-solutions/zigbee/ Zigbee is the only complete loT solution — from mesh network to the universal language that allows smart objects to work together.</p></li><li><p>Matter<br> https://csa-iot.org/all-solutions/matter/</p></li></ul><p>Matter (formerly Project Connected Home over IP, or Project CHIP) is a new Working Group within the Connectivity Standards Alliance (CSA, formerly Zigbee Alliance). This Working Group plans to develop and promote the adoption of a new, royalty-free connectivity standard to increase compatibility among smart home products, with security as a fundamental design tenet.</p><p>The goal of the Matter project is to simplify development for manufacturers and increase compatibility for consumers. The project is built around a shared belief that smart home devices should be secure, reliable, and seamless to use. By building upon Internet Protocol (IP), the project aims to enable communication across smart home devices, mobile apps, and cloud services and to define a specific set of IP-based networking technologies for device certification.</p><p>The CSA officially opened the Matter Working Group on January 17, 2020 and is in the process of drafting the specification.</p><ul><li>PLC-IOT<br> https://e.huawei.com/cn/solutions/enterprise-networks/plc-iot-alliance</li></ul><blockquote><p>基于IPv6</p></blockquote><h2 id="方案选型" tabindex="-1"><a class="header-anchor" href="#方案选型"><span>方案选型</span></a></h2><h3 id="homeassistant" tabindex="-1"><a class="header-anchor" href="#homeassistant"><span>HomeAssistant</span></a></h3><ul><li>官网： https://www.home-assistant.io/</li><li>仓库： https://github.com/home-assistant</li></ul><h3 id="webthings" tabindex="-1"><a class="header-anchor" href="#webthings"><span>WebThings</span></a></h3><ul><li>官网： https://webthings.io/</li><li>仓库： https://github.com/WebThingsIO</li></ul><h3 id="openhab" tabindex="-1"><a class="header-anchor" href="#openhab"><span>openHAB</span></a></h3><ul><li>官网： https://www.openhab.org/</li><li>仓库： https://github.com/openhab</li></ul><h2 id="安装配置" tabindex="-1"><a class="header-anchor" href="#安装配置"><span>安装配置</span></a></h2><p>Ubuntu 20.04 focal</p><p>基于 Home Assistant Container 的核心大脑</p><h3 id="文件共享客户端samba" tabindex="-1"><a class="header-anchor" href="#文件共享客户端samba"><span>文件共享客户端samba</span></a></h3><p>数据共享</p><h3 id="域名证书同步ssl" tabindex="-1"><a class="header-anchor" href="#域名证书同步ssl"><span>域名证书同步ssl</span></a></h3><p>let&#39;s encrypt 证书</p><h3 id="服务暴露apache" tabindex="-1"><a class="header-anchor" href="#服务暴露apache"><span>服务暴露Apache</span></a></h3><h3 id="镜像容器docker" tabindex="-1"><a class="header-anchor" href="#镜像容器docker"><span>镜像容器Docker</span></a></h3><p>官方安装参考文档：<a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/install/ubuntu/</a></p><h4 id="安装步骤" tabindex="-1"><a class="header-anchor" href="#安装步骤"><span>安装步骤</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 安装 docker-ce 及 docker compose</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker-ce</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker-compose-plugin</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="安装检查" tabindex="-1"><a class="header-anchor" href="#安装检查"><span>安装检查</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> version</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> version</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="安装配置-1" tabindex="-1"><a class="header-anchor" href="#安装配置-1"><span>安装配置</span></a></h4><ul><li>Manage Docker as a non-root user，参考文档： <a href="https://docs.docker.com/engine/install/linux-postinstall/#manage-docker-as-a-non-root-user" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/install/linux-postinstall/#manage-docker-as-a-non-root-user</a></li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Create the docker group.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> groupadd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Add your user to the docker group.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> usermod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -aG</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $USER</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="homeassistant-1" tabindex="-1"><a class="header-anchor" href="#homeassistant-1"><span>HomeAssistant</span></a></h3><p>Home Assistant</p><ul><li>官网：https://www.home-assistant.io/</li><li>仓库：https://github.com/home-assistant/core</li></ul><p>参考文档：https://www.home-assistant.io/installation/linux#install-home-assistant-container</p><h3 id="mosquitto" tabindex="-1"><a class="header-anchor" href="#mosquitto"><span>mosquitto</span></a></h3><p>mqtt broker</p><ul><li>官网：https://www.mosquitto.org/</li><li>仓库：https://github.com/eclipse/mosquitto</li></ul><h3 id="zigbee2mqtt" tabindex="-1"><a class="header-anchor" href="#zigbee2mqtt"><span>zigbee2mqtt</span></a></h3><p>依赖mqtt</p><ul><li>官网：https://www.zigbee2mqtt.io/</li><li>仓库：https://github.com/Koenkk/zigbee2mqtt</li></ul><h3 id="frigate" tabindex="-1"><a class="header-anchor" href="#frigate"><span>Frigate</span></a></h3><p>摄像头，依赖mqtt</p><ul><li>官网：https://frigate.video/</li><li>仓库：https://github.com/blakeblackshear/frigate</li></ul><h3 id="duplicati" tabindex="-1"><a class="header-anchor" href="#duplicati"><span>duplicati</span></a></h3><p>备份恢复</p><ul><li>官网：https://www.duplicati.com/</li><li>仓库：https://github.com/duplicati/duplicati</li></ul>`,61)])])}const p=s(n,[["render",o]]),c=JSON.parse(`{"path":"/projects/homelab/homelab-30-conn.html","title":"极客家居-连接控制","lang":"zh-CN","frontmatter":{"order":30,"title":"极客家居-连接控制","author":"abstiger","article":false,"description":"极客家居-连接控制 基于 HAOS 的连接控制处理 原理背景 现有的智能家居解决方案几乎都是需要将家庭数据上传至云端，在云端编辑规则或者场景方案来实现自动化及智能控制。 但这带来了诸多的安全隐患，尽管各厂商均宣称其尊重隐私，但显然我们并不希望将家庭的私有数据放到云端！ 运算处理 所谓智能家居的运作流程：收集各种智能设备的输入，在核心中进行场景匹配和规则...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"WebPage\\",\\"name\\":\\"极客家居-连接控制\\",\\"description\\":\\"极客家居-连接控制 基于 HAOS 的连接控制处理 原理背景 现有的智能家居解决方案几乎都是需要将家庭数据上传至云端，在云端编辑规则或者场景方案来实现自动化及智能控制。 但这带来了诸多的安全隐患，尽管各厂商均宣称其尊重隐私，但显然我们并不希望将家庭的私有数据放到云端！ 运算处理 所谓智能家居的运作流程：收集各种智能设备的输入，在核心中进行场景匹配和规则...\\"}"],["meta",{"property":"og:url","content":"https://abstiger.com/projects/homelab/homelab-30-conn.html"}],["meta",{"property":"og:site_name","content":"Tiger's Website"}],["meta",{"property":"og:title","content":"极客家居-连接控制"}],["meta",{"property":"og:description","content":"极客家居-连接控制 基于 HAOS 的连接控制处理 原理背景 现有的智能家居解决方案几乎都是需要将家庭数据上传至云端，在云端编辑规则或者场景方案来实现自动化及智能控制。 但这带来了诸多的安全隐患，尽管各厂商均宣称其尊重隐私，但显然我们并不希望将家庭的私有数据放到云端！ 运算处理 所谓智能家居的运作流程：收集各种智能设备的输入，在核心中进行场景匹配和规则..."}],["meta",{"property":"og:type","content":"website"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-11-15T10:21:25.000Z"}],["meta",{"property":"article:author","content":"abstiger"}],["meta",{"property":"article:modified_time","content":"2025-11-15T10:21:25.000Z"}]]},"git":{"createdTime":1763202085000,"updatedTime":1763202085000,"contributors":[{"name":"mingqiang.cheng","username":"","email":"mingqiang.cheng@cloudpense.com","commits":1}]},"readingTime":{"minutes":3.3,"words":991},"filePathRelative":"projects/homelab/homelab-30-conn.md","excerpt":"\\n<p>基于 HAOS 的连接控制处理</p>\\n<h2>原理背景</h2>\\n<p>现有的智能家居解决方案几乎都是需要将家庭数据上传至云端，在云端编辑规则或者场景方案来实现自动化及智能控制。</p>\\n<p>但这带来了诸多的安全隐患，尽管各厂商均宣称其尊重隐私，但显然我们并不希望将家庭的私有数据放到云端！</p>\\n<h3>运算处理</h3>\\n<p>所谓智能家居的运作流程：收集各种智能设备的输入，在<strong>核心</strong>中进行场景匹配和规则运算，再调用智能设备的输出</p>\\n<h3>连接协议</h3>\\n<p>目前来说IOT的连接标准或者统一联盟为：https://csa-iot.org</p>","autoDesc":true}`);export{p as comp,c as data};
